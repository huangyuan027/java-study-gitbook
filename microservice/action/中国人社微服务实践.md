# 中国人社微服务实践

## 1. 技术考虑

### 1.1 

### 1.2 网关

网关主要考虑zuul和Spring Cloud Gateway

- Q: 为什么选Spring Cloud Gateway?

  >A: 支持限流和非阻塞API,基于Filter 链很容易扩展

- Q: 你主要用网关做了什么

  >A: 
  >
  >1. 通过**动态路由**转发到对应的服务
  >2. **负载均衡**（以lb:// 开头）
  >3. 全局过滤器：
  >   1. **认证授权**：设置统一的请求头，其他微服务通过请求头来判断是否走了网关（）
  >   2. 请求之前，**打印请求日志**（自定义GlobalFilter）
  >   3. 过滤掉那些禁止外部调用的地址（自定义GlobalFilter）
  >4. 对验证码进行限流（使用阿里Sentinel 做的网关限流）
  >5. 对网关请求异常做统一处理
  >6. 对服务断路器做降级处理（Hystrix）
  >7. **跨域设置**

### 1.3 授权认证服务

- Q: 你授权认证服务具体都做写什么

  >1. 实现OAuth2 认证（通过spring security 和 spring oauth）
  >
  >2. 配置一个认证服务器（AuthorizationServer） 和 资源服务器（ResourceServer）

